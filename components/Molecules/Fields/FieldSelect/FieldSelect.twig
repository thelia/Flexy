{% set classes = '' %}
{% if error %}
   {% set classes = classes ~ ' FieldSelect--error' %}
{% endif %}
{% if success %}
   {% set classes = classes ~ ' FieldSelect--success' %}
{% endif %}
{% if size %}
   {% set classes = classes ~ ' FieldSelect--' ~ size %}
{% endif %}

<div class='FieldSelect{{ classes }}' {% if disabled %}disabled{% endif %}>
  <div class='FieldSelect-header'>
    <label for='{{ name }}' class='FieldSelect-label'>
      {{ label }}{% if required and label %} *{% endif %}
    </label>
    {% if tooltip %}
      {% include '../../Tooltip/Tooltip.twig' with {tooltip: tooltip, position: 'bottom'} %}
    {% endif %}
  </div>
  <select
    class='FieldSelect-select'
    name='{{ name }}'
    id='{{ name }}'
    {% if value %}value='{{ value }}'{% endif %}
    {% if required %}required{% endif %}
  >
    {% if placeholder %}
      <option value="" hidden class='FieldSelect-placeholder'>
        {{ placeholder }}{% if required and  not label %} *{% endif %}
      </option>
    {% endif %}
    {% for option in options %}
      <option value="{{ option.value }}">{{ option.label }}</option>
    {% endfor %}
  </select>
  {% if error %}<span class='FieldSelect-error'>{{ error }}</span>{% endif %}
</div>

{# TODO: fichier js ? #}
{% block javascript %}
  <script>
    const select = document.querySelector("select");

    select.addEventListener('change', function() {
      if (select.value.trim() !== '') {
        select.classList.add('FieldSelect-select--filled');
      } else {
        select.classList.remove('FieldSelect-select--filled');
      }
    });
  </script>
{% endblock %} 
