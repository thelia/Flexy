{% set type = type|default('classic') %}
{# type: 'classic'|'white' #}
{% set value = value|default('') %}

{% set classes = '' %}
{% if type != 'classic' %}
	{% set classes = classes ~ ' SearchBar--' ~ type %}
{% endif %}

<div {{ attributes }}>
	<label class="SearchBar" aria-label={{"Search"|trans}}>
		<button class='w-4 h-4'>{{ ux_icon("search") }}</button>
		<input type="text" name="query" placeholder={{"e.g. Shoes, T-shirts, ..."|trans}} autocomplete='off' data-model="debounce(500)|query"/>

		<span>{{ this.query }}</span>
	</label>

	{% if this.products|length > 0 or this.categories|length > 0 %}
		<div classname="SearchDropdown">
			<div classname="SearchDropdown-results-grid">
				<div classname="mb-8 SearchDropdown-results-products">
					<div classname="mb-[14px] text-sm uppercase text-grey">
						Produits
					</div>

					{% for product in this.products %}
						{% include '@components/Molecules/ProductCard/ProductCard.twig' with {product: product} %}
					{% endfor %}
				</div>
				<div classname="mb-8 SearchDropdown-results-categories">
					<div classname="mb-[14px] uppercase text-grey text-sm">Cat√©gories</div>

					{% for product in this.products %}
						{% include '@components/Molecules/ProductCard/ProductCard.twig' with {product: product} %}
					{% endfor %}
				</div>
				{% if this.products|length > 4 or this.categories|length > 0 %}
					<a href="/search?query={{query}}" classname="mx-auto mt-8 Button">
						Voir tous les produits
					</a>
				{% endif %}
			</div>
		</div>
	</div>
{% endif %}</div>
